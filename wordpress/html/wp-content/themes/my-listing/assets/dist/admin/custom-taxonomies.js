!function(t){var n=function(){this.addButton=t("#c27-add-taxonomy"),this.container=t("#c27-custom-taxonomies"),void 0===c27_custom_taxonomies.taxonomies&&(c27_custom_taxonomies.taxonomies=[]),this.addTaxonomy(c27_custom_taxonomies.taxonomies),this.initialize(),t("#settings-taxonomies .taxonomy-fields").sortable()};n.prototype={Window:t(window),form:[],initialize:function(){this.Window.on("hashchange",t.proxy(this.onHashChange,this)),this.Window.trigger("hashchange")},bindEvents:function(){this.addButton.on("click",t.proxy(this.onButtonClick,this)),this.container.on("click","[data-delete-btn]",t.proxy(this.deleteTaxonomy,this)),this.container.on("keyup","input[data-field-label]",t.proxy(this.updateLabel,this))},unbindEvents:function(){this.addButton.off("click",t.proxy(this.onButtonClick,this)),this.container.off("click","[data-delete-btn]",t.proxy(this.deleteTaxonomy,this)),this.container.off("keyup","input[data-field-label]",t.proxy(this.updateLabel,this))},onHashChange:function(){if(this.form=t('form[action^="options.php"]'),"#settings-taxonomies"===window.location.hash)return this.bindEvents();this.unbindEvents()},onButtonClick:function(t){t.preventDefault(),this.addTaxonomy()},onSubmit:function(n){var o=this.container.find(":input"),i=!1;o.removeClass("required-field");for(var e=0;e<=o.length;++e){var a=t(o[e]);t(a).val()||(a.addClass("required-field"),i=!0)}i&&(n.preventDefault(),alert(c27_custom_taxonomies.requiredMsg))},addTaxonomy:function(t){var n;t=t||[{slug:"",label:"",can_edit_slug:!0}],n=wp.template("c27-custom-taxonomies")({taxonomies:t,count:this.container.children().length}),this.container.append(n)},deleteTaxonomy:function(n){n.preventDefault();var o=t(n.currentTarget);if(confirm(c27_custom_taxonomies.deleteMsg)){o.parents("div[data-taxonomy]:first").remove();var i=this.container.children("div[data-taxonomy]");i.length||this.addTaxonomy(),i.each(function(n){t(this).find(":input").each(function(){var o=t(this),i=o.attr("name");o.attr("name",i.replace(/job_manager_custom_taxonomy\[(\d+)\]/,"job_manager_custom_taxonomy["+n+"]"))})})}},updateLabel:function(n){var o=t(n.currentTarget),i=o.parents(".head-button:first"),e=i.find("span[data-label]"),a=i.find("input[data-field-slug]"),s=o.val();e.text(s),a.prop("readonly")||a.val(this._toSlug(s))},_toSlug:function(n){return(n=t.trim(n.toLowerCase().replace(/([^a-z0-9])/gi," ",n))).replace(/\s+/g,"-",n)}},t(document).ready(function(){new n})}(jQuery);
//# sourceMappingURL=custom-taxonomies.js.map
